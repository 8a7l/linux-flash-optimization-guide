Туторіал: Як оптимізувати Linux під запуск з флешки для продовження життя накопичувача

1. Встановлення системи на флешку
- Встановлюємо Linux Mint (або інший дистрибутив) безпосередньо на USB-флешку.
- Обираємо файлову систему ext4 (з журналюванням, щоб не втрачати цілісність).
- Використовуємо стандартний розподіл розділів (root /, swap-файл чи swap-розділ).

2. Мінімізація записів на флешку
a) Відключення запису часу останнього доступу (noatime)
- Відредагувати файл /etc/fstab і додати опцію noatime до рядка, де монтується кореневий розділ і інші.
- Приклад рядка в /etc/fstab:
UUID=... / ext4 errors=remount-ro,noatime 0 1
- Це зменшить кількість записів, пов’язаних із оновленням атрибутів файлів.

b) Використання tmpfs для тимчасових директорій
- Перемістити тимчасові каталоги /tmp і /var/tmp у оперативну пам’ять.
- В /etc/fstab додати рядки:
tmpfs /tmp tmpfs defaults,noatime,mode=1777 0 0
tmpfs /var/tmp tmpfs defaults,noatime,mode=1777 0 0
- Це означає, що тимчасові файли будуть створюватися у RAM, не пишучи на флешку.

c) Використання zram для swap (компресований swap в оперативній пам’яті)
- Встановити пакет zram-config:
sudo apt update
sudo apt install zram-config
- Він автоматично налаштує кілька zram-пристроїв, які будуть працювати як швидкий swap у RAM, зменшуючи звернення до флешки.
- Перевірити активний swap командою:
swapon --show
- Вимкнути або видалити файл swap на флешці, якщо він був раніше налаштований, щоб уникнути записів на диск.

3. Залишити журналювання файлової системи ввімкненим
- Не вимикаємо журналування (ext4 із журналом) — це важливо для безпеки і цілісності даних.
- Журналювання не сильно впливає на ресурс флешки у порівнянні з іншими записами, особливо якщо ми мінімізували інші операції запису.

4. Загальні рекомендації
- Використовувати якісні флешки з підтримкою wear leveling.
- Регулярно робити резервні копії важливих даних.
- Не витягати флешку без безпечного відключення.
- Мінімізувати використання swap (переважно мати достатньо оперативної пам’яті).
- Відключати або оптимізувати фонові сервіси, які часто пишуть логи.

Підсумок
Ці кроки допомагають значно зменшити кількість записів на флешку і продовжити її ресурс, одночасно зберігаючи зручність і безпеку системи.
